{% extends 'body.html' %} {% load static %}
{% block title %} View Ratebook {% endblock %}
{% block sidebarcontent %} 
  {% include 'ratemanager/sidebar.html' %} 
{% endblock  %}
{% load crispy_forms_tags %}
{% block maincontent %} 

<h2 class="text-center"><u><b>View Ratebook</b></u></h2>
<form method="post" action="/ratemanager/viewRB/">
  {% csrf_token %}
  <table class="table table-sm">
    {% for field in viewForm %}
      {%if forloop.counter|divisibleby:"2" %}
        <td>
          {{field.label}}:&emsp;{{field}}
        </td>
      </tr>
      {%else%}
      <tr>
        <td>
          {{field.label}}:&emsp;{{field}}
        </td>
      {%endif%}
    {%endfor%}
  </table>
  <!--
  <div class="text-center">
    <input type="submit" class="btn btn-primary" value="Apply Filters" />
  </div>  
  -->
</form>

<br>
<nav aria-label="Page navigation">
  <ul class="pagination pagination-sm">
     {% if page_obj.has_previous %}
     <li class="page-item"><a class="page-link" href="?page={{page_obj.previous_page_number}}">Previous</a></li>
     {% endif %}
     {% for num in page_obj.paginator.page_range %}
     {% if page_obj.number == num %}
     <li class="page-item active"><a class="page-link" href="?page={{num}}">{{ num }}</a></li>
     {% else %}
     <li class="page-item"><a class="page-link" href="?page={{num}}">{{ num }}</a></li>
     {% endif %}
     {% endfor %}
     {% if page_obj.has_next %}
     <li class="page-item"><a class="page-link" href="?page={{page_obj.next_page_number}}">Next</a></li>
     {% endif %}
  </ul>
</nav>
<div class="container table-responsive">          
  <table id="example" class="table table-sm table-condensed cell-border table-hover">
    <thead>
      <tr>
        <th>Ratebook Name</th>
        <th>Ratebook ID</th>
        <th>Ratebook Version</th>
        <th>New Business Effective Date</th>
        <th>New Business Expiry Date</th>
        <th>Renewal Effective Date</th>
        <th>Renewal Expiry Date</th>
        <th>Migration Date</th>
        <th>Migration Time</th>
        <th>Activation Date</th>
        <th>Activation Time</th>
        <th>Ratebook Revision Type</th>
        <th>Ratebook Status Type</th>
        <th>Ratebook Change Type</th>
        <th>Carrier</th>
        <th>State</th>
        <th>Line of Business</th>
        <th>UW Company</th>
        <th>Policy Type</th>
        <th>Policy SubType</th>
        <th>Product Code</th>
      </tr>
    </thead>
    <tbody>
    {% if filteredRatebooks %}  
    {% for obj in filteredRatebooks %}
      <tr style='cursor: pointer; cursor: hand;' onclick="window.location='/ratemanager/viewExhibits/{{ obj.RatebookID }}/{{ obj.RatebookVersion }}';">
        <td>{{obj.RatebookName}}</td>
        <td>{{obj.RatebookID}}</td>
        <td>{{obj.RatebookVersion}}</td>
        <td>{{obj.NewBusinessEffectiveDate}}</td>
        <td>{{obj.NewBusinessExpiryDate}}</td>
        <td>{{obj.RenewalEffectiveDate}}</td>
        <td>{{obj.RenewalExpiryDate}}</td>
        <td>{{obj.MigrationDate}}</td>
        <td>{{obj.MigrationTime}}</td>
        <td>{{obj.ActivationDate}}</td>
        <td>{{obj.ActivationTime}}</td>
        <td>{{obj.RatebookRevisionType}}</td>
        <td>{{obj.RatebookStatusType}}</td>
        <td>{{obj.RatebookChangeType}}</td>
        <td>{{obj.Carrier}}</td>
        <td>{{obj.State}}</td>
        <td>{{obj.LineofBusiness}}</td>
        <td>{{obj.UWCompany}}</td>
        <td>{{obj.PolicyType}}</td>
        <td>{{obj.PolicySubType}}</td>
        <td>{{obj.ProductCode}}</td>
      </tr>
    {% endfor %}
    {% endif %}
    </tbody>
  </table>
</div>
<script>
  $(document).ready(function () {
    $('#example').DataTable({
      paging: false,
      searching: false,
      info: false,
      order: [[9, 'desc']],
    });
});
</script>

{% endblock %}
