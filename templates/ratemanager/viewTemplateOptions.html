{% extends 'body.html' %} {% load static %}
{% block title %} View Ratebook {% endblock %}
{% block sidebarcontent %} 
  {% include 'ratemanager/sidebar.html' %} 
{% endblock  %}
{% load crispy_forms_tags %}
{% block maincontent %} 

<h3>View Ratebook by Date</h3>
<form method="post" action="/ratemanager/viewTemplateOptions/">
  {% csrf_token %}
  <table class="table table-sm">
    {% for field in viewForm %}
      {%if forloop.counter|divisibleby:"2" %}
        <td>
          {{field.label}}:&emsp;{{field}}
        </td>
      </tr>
      {%else%}
      <tr>
        <td>
          {{field.label}}:&emsp;{{field}}
        </td>
      {%endif%}
    {%endfor%}
  </table>

  <div>
    <input type="submit" class="btn btn-secondary" value="Apply Filters" />
  </div>  

</form>

<br>
<nav aria-label="Page navigation">
  <ul class="pagination pagination-sm">
     {% if page_obj.has_previous %}
     <li class="page-item"><a class="page-link" href="?page={{page_obj.previous_page_number}}">Previous</a></li>
     {% endif %}
     {% for num in page_obj.paginator.page_range %}
     {% if page_obj.number == num %}
     <li class="page-item active"><a class="page-link" href="?page={{num}}">{{ num }}</a></li>
     {% else %}
     <li class="page-item"><a class="page-link" href="?page={{num}}">{{ num }}</a></li>
     {% endif %}
     {% endfor %}
     {% if page_obj.has_next %}
     <li class="page-item"><a class="page-link" href="?page={{page_obj.next_page_number}}">Next</a></li>
     {% endif %}
  </ul>
</nav>
<div class="container table-responsive">          
  <table id="example" class="table table-sm table-condensed cell-border table-hover">
    <thead>
      <tr>
        <th>Ratebook Name</th>
        <th>Ratebook ID</th>
        <th>Ratebook RevisionType</th>
        <th>Ratebook Status Type</th>
        <th>Ratebook Change Type</th>
      </tr>
    </thead>
    <tbody>
    {% if page_obj %}  
    {% for obj in page_obj %}
      <tr style='cursor: pointer; cursor: hand;' onclick="window.location='/ratemanager/viewTemplate/{{ obj.RatebookID }}/';">
        <td>{{obj.RatebookName}}</td>
        <td>{{obj.RatebookID}}</td>
        <td>{{obj.RatebookRevisionType}}</td>
        <td>{{obj.RatebookStatusType}}</td>
        <td>{{obj.RatebookChangeType}}</td>
      </tr>
    {% endfor %}
    {% endif %}
    </tbody>
  </table>
</div>

<script>
  $(document).ready(function () {
    $('#example').DataTable({
      paging: false,
      searching: false,
      info: false,
      order: [[1, 'desc']],
    });
});
</script>
{% endblock %}
